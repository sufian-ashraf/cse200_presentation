
\begin{frame}{Solutions to Violations}

    % Case 1
    \uncover<1->{
        \begin{columns}[c]
            \column{0.08\textwidth}
            \centering\textbf{\small Case 1}

            \column{0.42\textwidth}
            \begin{block}{\faIcon{exclamation-circle}~Violation}
                \small Root is \textcolor{rbred}{\textbf{RED}} — Property 2 broken
            \end{block}

            \column{0.42\textwidth}
            \begin{alertblock}{\faIcon{wrench}~Fix}
                \small Recolor root to \textcolor{rbblack}{\textbf{BLACK}}
            \end{alertblock}
        \end{columns}
    }

    \vspace{0.12cm}

    % Case 2
    \uncover<2->{
        \begin{columns}[c]
            \column{0.08\textwidth}
            \centering\textbf{\small Case 2}

            \column{0.42\textwidth}
            \begin{block}{\faIcon{exclamation-circle}~Violation}
                \small Uncle is \textcolor{rbred}{\textbf{RED}} — two reds adjacent
            \end{block}

            \column{0.42\textwidth}
            \begin{alertblock}{\faIcon{wrench}~Fix}
                \small Recolor parent, uncle \textcolor{rbblack}{\textbf{BLACK}}; grandparent \textcolor{rbred}{\textbf{RED}}
            \end{alertblock}
        \end{columns}
    }

    \vspace{0.12cm}

    % Case 3
    \uncover<3->{
        \begin{columns}[c]
            \column{0.08\textwidth}
            \centering\textbf{\small Case 3}

            \column{0.42\textwidth}
            \begin{block}{\faIcon{exclamation-circle}~Violation}
                \small Uncle is \textcolor{rbblack}{\textbf{BLACK}} — Right-Right
            \end{block}

            \column{0.42\textwidth}
            \begin{alertblock}{\faIcon{wrench}~Fix}
                \small Left rotate at grandparent, then recolor
            \end{alertblock}
        \end{columns}
    }

    \vspace{0.12cm}

    % Case 4
    \uncover<4->{
        \begin{columns}[c]
            \column{0.08\textwidth}
            \centering\textbf{\small Case 4}

            \column{0.42\textwidth}
            \begin{block}{\faIcon{exclamation-circle}~Violation}
                \small Uncle is \textcolor{rbblack}{\textbf{BLACK}} — Left-Right
            \end{block}

            \column{0.42\textwidth}
            \begin{alertblock}{\faIcon{wrench}~Fix}
                \small Left rotate at parent, then apply Case 3
            \end{alertblock}
        \end{columns}
    }

\end{frame}

% % ── Insertion process ──────────────────────────────────────
% \begin{frame}{Insertion: The Process}
%     \begin{enumerate}
%         \item<1-> Insert like a normal BST
%         \item<2-> Color the new node \textcolor{rbred}{\textbf{RED}}
%         \item<3-> Fix any violations
%     \end{enumerate}

%     \only<4->{
%         \begin{center}
%             \begin{tikzpicture}[scale=0.6]
%                 \node at (-2.5,1.5) {\textbf{Before:}};
%                 \node[blacknode] at (-2.5,0) {10}
%                     child {node[blacknode] {5}}
%                     child {node[blacknode] {15}};

%                 \node at (2.5,1.5) {\textbf{After inserting 12:}};
%                 \node[blacknode] at (2.5,0) {10}
%                     child {node[blacknode] {5}}
%                     child {node[rednode]  {15}
%                         child {node[rednode]{12}}
%                         child[missing] {}
%                     };
%             \end{tikzpicture}
%         \end{center}
%     }

%     \only<5->{
%         \begin{alertblock}{Problem!}
%             Two adjacent red nodes — Property 4 violated!
%         \end{alertblock}
%     }
% \end{frame}

% % ── Fixing violations ──────────────────────────────────────
% \begin{frame}{Fixing Violations}
%     \begin{columns}
%         \column{0.5\textwidth}
%         \begin{block}{Uncle is RED}
%             \begin{itemize}
%                 \item Easy case!
%                 \item Just recolor
%                 \item Flip parent, uncle \& grandparent
%             \end{itemize}
%         \end{block}

%         \pause

%         \column{0.5\textwidth}
%         \begin{alertblock}{Uncle is BLACK}
%             \begin{itemize}
%                 \item Hard case!
%                 \item Need rotations
%                 \item Left rotate, right rotate
%                 \item Sometimes both!
%             \end{itemize}
%         \end{alertblock}
%     \end{columns}

%     \pause
%     \vspace{0.4cm}

%     \begin{center}
%         \Large\textcolor{rbred}{This is where it gets tricky!}\\[0.3cm]
%         \large But it keeps the tree balanced!
%     \end{center}
% \end{frame}

% ── Remember the linked-list problem? ──────────────────────
\begin{frame}{Remember This Problem?}
    \begin{center}
        \Large Let's try inserting \textbf{1, 2, 3, 4, 5} again\ldots\\[0.3cm]
        \large But this time in a \textcolor{rbred}{Red-Black Tree}!
    \end{center}
    \pause

    \begin{center}
        \Large\textbf{Watch the magic happen!}
    \end{center}
\end{frame}

% Progress bars removed - using simple direct presentation style like introduction.tex

% ── Step 1: Insert 1 ───────────────────────────────────────
% ── Step 1: Insert 1 ───────────────────────────────────────
\begin{frame}{Insert 1}
    \vspace{0.3cm}
    \begin{columns}[c]
        \column{0.45\textwidth}
        \begin{itemize}
            \item<1-> First node is always \textbf{root}
            \item<1-> Insert as {\textbf{RED}} (default color)
            \item<3-> But Root cannot be \textbf{RED!} \textcolor{badred}{\textbf{ Property 2 violated - Case : 1}}
            \item<4-> Recolor root to \textcolor{rbblack}{\textbf{BLACK}}
            \item<4->\textcolor{goodgreen}{\textbf{Fixed!}}
        \end{itemize}

        \column{0.55\textwidth}
        \begin{center}
            \only<2>{\textbf{After Insert}\\[0.4cm]}
            \only<3>{\textbf{Violation — Root is RED!}\\[0.4cm]}
            \only<4>{\textbf{After Recolor}\\[0.4cm]}

            \only<2-3>{
                \begin{tikzpicture}[scale=1.0]
                    \node[rednode] {1};
                \end{tikzpicture}
            }
            \only<4>{
                \begin{tikzpicture}[scale=1.0]
                    \node[blacknode] {1};
                \end{tikzpicture}
            }
        \end{center}
    \end{columns}
\end{frame}
% ── Step 2: Insert 2 ───────────────────────────────────────
\begin{frame}{Insert 2}
    \vspace{0.3cm}
    
    % Step 1: Show insertion plan
    \only<1>{
        \begin{columns}[c]
            \column{0.6\textwidth}
            \begin{itemize}
                \item Right child of 1
                \item Insert as \textcolor{rbred}{\textbf{RED}} (default color)
            \end{itemize}
            
            \column{0.4\textwidth}
        \end{columns}
    }
    
    \pause
    
    % Step 2: Show tree after insertion
    \only<2->{  
        \begin{columns}[c]
            \column{0.5\textwidth}
            \begin{itemize}
                \item Right child of 1
                \item Insert as \textcolor{badred}{\textbf{RED}} (default color)
                \item Parent is BLACK — \textcolor{goodgreen}{\textbf{no violation}} \textcolor{goodgreen!70!black}{\faIcon{check}}
            \end{itemize}

            \column{0.5\textwidth}
            \begin{center}
                \textbf{After Insert}\\[0.2cm]
                \begin{tikzpicture}[scale=0.9]
                    \node[blacknode] {1}
                        child[missing] {}
                        child {node[rednode] {2}};
                \end{tikzpicture}
            \end{center}
        \end{columns}
    }
\end{frame}

% ── Step 3: Insert 3 ───────────────────────────────────────
% ── Step 3: Insert 3 ───────────────────────────────────────
\begin{frame}{Insert 3}
    \vspace{0.2cm}
    \begin{columns}[c]
        \column{0.45\textwidth}
        \begin{itemize}
            \item<1-> Right child of 2
            \item<1-> Insert as \textcolor{rbred}{\textbf{RED}} (default)
            \item<2-> Uncle is \textcolor{rbblack}{\textbf{NIL/BLACK}}
            \item<2-> \textcolor{badred}{\textbf{Case: 3}}\\
                      Left rotate at node 1
            \item<3-> Recolor: 2 $\to$ \textbf{BLACK}, children $\to$ \textcolor{rbred}{\textbf{RED}}
            \item<4-> \textcolor{goodgreen}{\textbf{Fixed!}}
        \end{itemize}

        \column{0.55\textwidth}
        \begin{center}
            % Stage label
            \only<1>{\textbf{After Insert}\\[0.4cm]}
            \only<2>{\textbf{\textcolor{badred}{Violation Found — Two RED in a row!}}\\[0.4cm]}
            \only<3>{\textbf{After Left Rotation}\\[0.4cm]}
            \only<4>{\textbf{After Recolor}\\[0.4cm]}

            % Tree — only one visible at a time, all in the same space
            \only<1-2>{
                \begin{tikzpicture}[scale=1.0]
                    \node[blacknode] {1}
                        child[missing] {}
                        child {node[rednode] {2}
                            child[missing] {}
                            child {node[rednode] {3}}
                        };
                \end{tikzpicture}
            }
            \only<3>{
                \begin{tikzpicture}[scale=1.0]
                    \node[rednode] {2}
                        child {node[rednode] {1}}
                        child {node[rednode] {3}};
                \end{tikzpicture}
            }
            \only<4>{
                \begin{tikzpicture}[scale=1.0]
                    \node[blacknode] {2}
                        child {node[rednode] {1}}
                        child {node[rednode] {3}};
                \end{tikzpicture}
            }
        \end{center}
    \end{columns}
\end{frame}

% ── Step 4: Insert 4 ───────────────────────────────────────
\begin{frame}{Insert 4}
    \vspace{0.2cm}
    \begin{columns}[c]
        \column{0.45\textwidth}
        \begin{itemize}
            \item<1-> Right child of 3
            \item<1-> Insert as \textcolor{rbred}{\textbf{RED}} (default)
            \item<2-> Uncle (node 1) is \textcolor{rbred}{\textbf{RED}}
            \item<2-> \textcolor{badred}{\textbf{CASE 2}}\\
                       Uncle is RED — just recolor!
            \item<3-> Recolor: parent \& uncle $\to$ \textbf{BLACK}
            \item<3-> Grandparent stays \textbf{BLACK}
            \item<4-> \textcolor{goodgreen}{\textbf{Fixed!}}
        \end{itemize}

        \column{0.55\textwidth}
        \begin{center}
            % Stage label
            \only<1>{\textbf{After Insert}\\[0.4cm]}
            \only<2>{\textcolor{badred}{\textbf{Violation Found — Uncle is RED}}\\[0.4cm]}
            \only<4>{\textbf{After Recolor}\\[0.4cm]}

            % Tree — only one visible at a time, all in the same space
            \only<1-2>{
                \begin{tikzpicture}[scale=1.0]
                    \node[blacknode] {2}
                        child {node[rednode] {1}}
                        child {node[rednode] {3}
                            child[missing] {}
                            child {node[rednode] {4}}
                        };
                \end{tikzpicture}
            }
            \only<4>{
                \begin{tikzpicture}[scale=1.0]
                    \node[blacknode] {2}
                        child {node[blacknode] {1}}
                        child {node[blacknode] {3}
                            child[missing] {}
                            child {node[rednode] {4}}
                        };
                \end{tikzpicture}
            }
        \end{center}
    \end{columns}
\end{frame}
% ── Step 5: Insert 5 ───────────────────────────────────────
\begin{frame}{Insert 5}
    \vspace{0.2cm}
    \begin{columns}[c]
        \column{0.45\textwidth}
        \begin{itemize}
            \item<1-> Right child of 4
            \item<1-> Insert as \textcolor{rbred}{\textbf{RED}} (default)
            \item<3-> Uncle (node 1) is \textcolor{rbblack}{\textbf{BLACK}}
            \item<3-> \textcolor{badred}{\textbf{CASE 3}}\\
                      Uncle is \textbf{BLACK} — rotate \& recolor!
            \item<4-> Left rotate at node 3 $\to$ 4 moves up
            \item<5-> Recolor: 4 $\to$ \textbf{BLACK}, children $\to$ \textcolor{badred}{\textbf{RED}}
            \item<5-> \textcolor{goodgreen}{\Large \textbf{We're done!}}
        \end{itemize}

        \column{0.55\textwidth}
        \begin{center}
            \only<2>{\textbf{After Insert}\\[0.4cm]}
            \only<3>{\textbf{\textcolor{badred}{Violation — Two RED in a row!}}\\[0.4cm]}
            \only<4>{\textbf{After Left Rotation}\\[0.4cm]}
            \only<5>{\textbf{After Recolor}\\[0.4cm]}

            \only<2-3>{
                \begin{tikzpicture}[scale=0.85]
                    \node[blacknode] {2}
                        child {node[blacknode] {1}}
                        child {node[blacknode] {3}
                            child[missing] {}
                            child {node[rednode] {4}
                                child[missing] {}
                                child {node[rednode] {5}}
                            }
                        };
                \end{tikzpicture}
            }
            \only<4>{
                \begin{tikzpicture}[scale=0.85]
                    \node[blacknode] {2}
                        child {node[blacknode] {1}}
                        child {node[rednode] {4}
                            child {node[rednode] {3}}
                            child {node[rednode] {5}}
                        };
                \end{tikzpicture}
            }
            \only<5>{
                \begin{tikzpicture}[scale=0.85]
                    \node[blacknode] {2}
                        child {node[blacknode] {1}}
                        child {node[blacknode] {4}
                            child {node[rednode] {3}}
                            child {node[rednode] {5}}
                        };
                \end{tikzpicture}
            }
        \end{center}
    \end{columns}
\end{frame}
% % ── Comparison ─────────────────────────────────────────────
% \begin{frame}{The Difference is HUGE!}
%     \begin{center}
%         \Large\textbf{BST vs.\ Red-Black Tree}\\[0.2cm]
%         \small Inserting \{1, 2, 3, 4, 5\} in order
%     \end{center}

%     \vspace{0.2cm}

%     \begin{columns}
%         \column{0.5\textwidth}
%         \begin{center}
%             \textbf{Regular BST}\\[0.15cm]
%             \begin{tikzpicture}[scale=0.28]
%                 \node[blacknode] {1}
%                     child[missing] {}
%                     child {node[blacknode] {2}
%                         child[missing] {}
%                         child {node[blacknode] {3}
%                             child[missing] {}
%                             child {node[blacknode] {4}
%                                 child[missing] {}
%                                 child {node[blacknode] {5}}
%                             }
%                         }
%                     };
%             \end{tikzpicture}
%             \\[0.15cm]
%             \small Height = 5 \textbullet{} $O(n)$ ops \textcolor{badred}{\faIcon{times-circle}}
%         \end{center}

%         \column{0.5\textwidth}
%         \begin{center}
%             \textbf{Red-Black Tree}\\[0.15cm]
%             \begin{tikzpicture}[scale=0.48]
%                 \node[blacknode] {2}
%                     child {node[blacknode] {1}}
%                     child {node[blacknode] {4}
%                         child {node[rednode] {3}}
%                         child {node[rednode] {5}}
%                     };
%             \end{tikzpicture}
%             \\[0.15cm]
%             \small Height = 3 \textbullet{} $O(\log n)$ ops \textcolor{goodgreen!70!black}{\faIcon{check-circle}}
%         \end{center}
%     \end{columns}

%     \pause
%     \vspace{0.1cm}
%     \begin{center}
%         \large\textcolor{goodgreen!60!black}{\textbf{Self-Balancing Magic!}} \textcolor{goodgreen!60!black}{\faIcon{magic}}
%     \end{center}
% \end{frame}
% ── Comparison ─────────────────────────────────────────────
\begin{frame}{Comparison of BST and RBT}
    \begin{center}
        \Large\textbf{BST vs.\ Red-Black Tree}\\[0.05cm]
        \small Inserting \{1, 2, 3, 4, 5\} in order
    \end{center}

    \vspace{0.15cm}

    \begin{columns}[c]
        \column{0.5\textwidth}
        \begin{center}
            \textbf{Regular BST}\\[0.2cm]
            \begin{tikzpicture}[scale=1.2]
                % Nodes
                \node[circle, draw, thick, minimum size=4mm, font=\tiny\bfseries, fill=rbblack!15, text=rbblack] (n1) at (0, 0) {1};
                \node[circle, draw, thick, minimum size=4mm, font=\tiny\bfseries, fill=rbblack!15, text=rbblack] (n2) at (0.3, -0.5) {2};
                \node[circle, draw, thick, minimum size=4mm, font=\tiny\bfseries, fill=rbblack!15, text=rbblack] (n3) at (0.6, -1.0) {3};
                \node[circle, draw, thick, minimum size=4mm, font=\tiny\bfseries, fill=rbblack!15, text=rbblack] (n4) at (0.9, -1.5) {4};
                \node[circle, draw, thick, minimum size=4mm, font=\tiny\bfseries, fill=rbblack!15, text=rbblack] (n5) at (1.2, -2.0) {5};
                
                % Edges
                \draw[thick] (n1) -- (n2);
                \draw[thick] (n2) -- (n3);
                \draw[thick] (n3) -- (n4);
                \draw[thick] (n4) -- (n5);
            \end{tikzpicture}

            \vspace{0.15cm}
            \small \textbf{Height = 5} \textbullet{} \textcolor{badred}{$O(n)$}
        \end{center}

        \column{0.5\textwidth}
        \begin{center}
            \textbf{Red-Black Tree}\\[0.2cm]
            \begin{tikzpicture}[scale=1.3]
                % Nodes
                \node[blacknode, minimum size=4mm, font=\tiny\bfseries] (n2) at (0, 0) {2};
                \node[blacknode, minimum size=4mm, font=\tiny\bfseries] (n1) at (-0.4, -0.5) {1};
                \node[blacknode, minimum size=4mm, font=\tiny\bfseries] (n4) at (0.4, -0.5) {4};
                \node[rednode, minimum size=4mm, font=\tiny\bfseries] (n3) at (0.1, -1.0) {3};
                \node[rednode, minimum size=4mm, font=\tiny\bfseries] (n5) at (0.7, -1.0) {5};
                
                % Edges
                \draw[thick] (n2) -- (n1);
                \draw[thick] (n2) -- (n4);
                \draw[thick] (n4) -- (n3);
                \draw[thick] (n4) -- (n5);
            \end{tikzpicture}

            \vspace{0.15cm}
            \small \textbf{Height = 3} \textbullet{} \textcolor{goodgreen!80!black}{$O(\log n)$}
        \end{center}
    \end{columns}
\end{frame}

% ══════════════════════════════════════════════════════════════
% BRIDGE SLIDE: From Insertion to Deletion
% ══════════════════════════════════════════════════════════════
\begin{frame}{}
    \begin{center}
        \vspace{1cm}
        \Large \textbf{Insertion is the easy half}\\[0.4cm]
        \textcolor{highlight}{\textbf{Now, What happens when we delete a node?}}\\[0.4cm]
    \end{center}
\end{frame}